(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(7775)}])},7775:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(5893),a=s(7294),r=s(7642),i=s(9008),c=s.n(i);function l(e){var t;let{devices:s,connectionStatus:r,isScanning:i,isConnecting:c,onScanDevices:l,onConnectDevice:o,onDisconnectDevice:d}=e,[m,x]=(0,a.useState)("");return(0,n.jsxs)("div",{className:"card p-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Device Connection"}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),(0,n.jsx)("span",{className:"status-badge ".concat(r.connected?"status-connected":"status-disconnected"),children:r.connected?"Connected":"Disconnected"})]}),r.connected&&(0,n.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Device:"})," ",r.device_name]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Address:"})," ",r.device_address]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Connected at:"})," ",(t=r.connected_at)?new Date(t).toLocaleTimeString():""]})]})]}),!r.connected&&(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("button",{onClick:l,disabled:i,className:"btn w-full mb-4 transition-all duration-200 ".concat(i?"btn-secondary":"btn-primary"),children:i?(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Scanning for WalkingPads..."]}):(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Scan for Devices"]})}),s.length>0&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Available Devices"}),(0,n.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto transition-all duration-300 ".concat(c?"opacity-50 pointer-events-none":""),children:s.map((e,t)=>(0,n.jsxs)("div",{className:"p-3 border rounded-lg transition-all duration-300 ".concat(c?"cursor-not-allowed bg-gray-100 border-gray-200":m===e.address?"border-primary-500 bg-primary-50 cursor-pointer hover:bg-primary-100":"border-gray-200 hover:border-gray-300 cursor-pointer hover:bg-gray-50"),onClick:()=>!c&&x(e.address),children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"font-medium transition-colors ".concat(c?"text-gray-400":"text-gray-900"),children:[e.name,c&&m===e.address&&(0,n.jsxs)("span",{className:"ml-2 inline-flex items-center",children:[(0,n.jsxs)("svg",{className:"animate-spin h-4 w-4 text-primary-500",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,n.jsx)("span",{className:"ml-1 text-sm text-primary-600",children:"Connecting..."})]})]}),(0,n.jsx)("div",{className:"text-sm transition-colors ".concat(c?"text-gray-300":"text-gray-500"),children:e.address})]})}),(0,n.jsxs)("div",{className:"text-sm transition-colors ".concat(c?"text-gray-300":"text-gray-400"),children:["RSSI: ",e.rssi]})]}),c&&m===e.address&&(0,n.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:(0,n.jsxs)("div",{className:"flex items-center text-sm text-primary-600",children:[(0,n.jsx)("svg",{className:"animate-pulse w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("circle",{cx:"10",cy:"10",r:"3"})}),"Establishing connection..."]})})]},t))}),(0,n.jsx)("button",{onClick:()=>m&&o(m),disabled:!m||c,className:"btn w-full mt-4 transition-all duration-200 ".concat(m?"btn-success":"btn-outline"),children:c?(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connecting to WalkingPad..."]}):(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),m?"Connect to Selected Device":"Select a Device First"]})})]})]}),r.connected&&(0,n.jsx)("div",{children:(0,n.jsx)("button",{onClick:d,className:"btn btn-danger w-full",children:"Disconnect Device"})})]})}function o(e){let{connected:t,treadmillStatus:s,onStart:r,onStop:i,onSetSpeed:c,onPowerOn:l,onPowerOff:o}=e,[d,m]=(0,a.useState)(0),[x,h]=(0,a.useState)(!1),[u,g]=(0,a.useState)(0),[j,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{m(s.speed),h(1===s.belt_state)},[s]);let p=e=>{m(e),c(e)};return(0,n.jsxs)("div",{className:"card p-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Treadmill Control"}),t?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Mode"}),(0,n.jsx)("div",{className:"font-semibold",children:(e=>{switch(e){case 0:return"Standby";case 1:return"Manual";case 2:return"Automatic";default:return"Unknown"}})(s.mode)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Belt State"}),(0,n.jsx)("div",{className:"font-semibold",children:(e=>{switch(e){case 0:return"Stopped";case 1:return"Running";case 2:return"Starting";case 3:return"Stopping";default:return"Unknown"}})(s.belt_state)})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Mode Control"}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("button",{onClick:l,className:"btn btn-success w-full max-w-xs",disabled:1===s.mode,children:(0,n.jsx)("div",{className:"flex items-center justify-center",children:"Power on"})})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Belt Control"}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("button",{onClick:x?i:()=>{if(j||x)return;r(),v(!0),g(3);let e=setInterval(()=>{g(t=>t<=1?(clearInterval(e),v(!1),0):t-1)},1e3)},className:"btn ".concat(x?"btn-danger":j?"btn-warning":"btn-success"," w-full max-w-xs"),disabled:0===s.mode||j,children:(0,n.jsx)("div",{className:"flex items-center justify-center",children:j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold mr-2",children:u}),"Starting in..."]}):x?(0,n.jsx)(n.Fragment,{children:"Stop Belt"}):(0,n.jsx)(n.Fragment,{children:"Start Belt"})})})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Speed Control"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Speed: ",d.toFixed(1)," km/h"]}),(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Max: 6.0 km/h"})]}),(0,n.jsx)("input",{type:"range",min:"0",max:"6",step:"0.1",value:d,onChange:e=>p(parseFloat(e.target.value)),className:"speed-control",disabled:0===s.mode})]}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3,4,5,6].map(e=>(0,n.jsxs)("button",{onClick:()=>p(e),className:"btn btn-outline btn-sm py-1 text-xs",disabled:0===s.mode,children:[e," km/h"]},e))})]})]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500 p-3 bg-blue-50 rounded-lg",children:[(0,n.jsx)("div",{className:"font-medium mb-1",children:"Keyboard Shortcuts:"}),(0,n.jsx)("div",{children:"Space: Start/Stop • ↑/↓: Speed +/- 0.1 • 1-6: Quick speeds"})]})]}):(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"text-gray-400 mb-2",children:(0,n.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.29-1.007-5.824-2.448M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})}),(0,n.jsx)("p",{className:"text-gray-500",children:"Connect to a device to access controls"})]})]})}function d(e){var t,s;let{connected:r,status:i,onRefreshStatus:c}=e,[l,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{if(r&&l){let e=setInterval(()=>{c()},3e3);return()=>clearInterval(e)}},[r,l,c]),(0,n.jsxs)("div",{className:"card p-6",children:[(0,n.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Live Statistics"})}),r?(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Current Speed"}),(0,n.jsx)("div",{className:"text-3xl font-bold ".concat(0===(t=i.speed)?"text-gray-500":t<2?"text-green-500":t<4?"text-yellow-500":"text-red-500"),children:i.speed.toFixed(1)}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:"km/h"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Exercise Time"}),(0,n.jsx)("div",{className:"text-3xl font-bold text-green-600",children:(e=>{let t=Math.floor(e/3600),s=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(s.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0")):"".concat(s,":").concat(n.toString().padStart(2,"0"))})(i.time)}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:"duration"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Distance"}),(0,n.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:(s=i.distance)>=1e3?"".concat((s/1e3).toFixed(2)," km"):"".concat(s," m")}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:"traveled"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Step Count"}),(0,n.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:i.steps.toLocaleString()}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:"steps"})]})]}):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"text-gray-400 mb-4",children:(0,n.jsx)("svg",{className:"w-20 h-20 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,n.jsx)("p",{className:"text-gray-500",children:"Connect to view real-time statistics"})]}),r&&(0,n.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,n.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(1===i.belt_state?"bg-green-500":"bg-gray-400")}),(0,n.jsxs)("span",{className:"text-gray-600",children:["Belt: ",1===i.belt_state?"Running":"Stopped"]})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(1===i.mode?"bg-blue-500":2===i.mode?"bg-yellow-500":"bg-gray-400")}),(0,n.jsxs)("span",{className:"text-gray-600",children:["Mode: ",0===i.mode?"Standby":1===i.mode?"Manual":"Auto"]})]})]}),(0,n.jsxs)("div",{className:"text-gray-400 text-xs",children:["Last updated: ",new Date().toLocaleTimeString()]})]})})]})}function m(e){var t,s;let{connected:r,onGetWorkoutHistory:i,workoutData:c,isLoading:l}=e,[o,d]=(0,a.useState)(0);return(0,n.jsxs)("div",{className:"card p-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Workout History"}),r?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("label",{htmlFor:"historyMode",className:"text-sm font-medium text-gray-700",children:"History Mode:"}),(0,n.jsxs)("select",{id:"historyMode",value:o,onChange:e=>d(parseInt(e.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:l,children:[(0,n.jsx)("option",{value:0,children:"Recent Workouts"}),(0,n.jsx)("option",{value:1,children:"All History"})]})]}),(0,n.jsx)("button",{onClick:()=>{r&&!l&&i(o)},disabled:l,className:"btn ".concat(l?"btn-secondary":"btn-primary"," flex items-center"),children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Get History"]})})]})}),c&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium text-gray-700",children:"Retrieved:"}),(0,n.jsx)("div",{className:"text-gray-900",children:new Date(c.timestamp).toLocaleString()})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium text-gray-700",children:"Mode:"}),(0,n.jsx)("div",{className:"text-gray-900",children:0===c.mode?"Recent Workouts":"All History"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium text-gray-700",children:"Data Size:"}),(0,n.jsxs)("div",{className:"text-gray-900",children:[(null===(t=c.parsed_data)||void 0===t?void 0:t.length)||0," bytes"]})]})]})}),c.message&&(0,n.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 text-yellow-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,n.jsx)("span",{className:"text-yellow-800",children:c.message})]})}),c.raw_data&&(0,n.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Raw Data"}),(0,n.jsx)("div",{className:"bg-gray-50 rounded p-3 font-mono text-sm break-all",children:c.raw_data})]}),c.parsed_data&&c.parsed_data.data_points&&c.parsed_data.data_points.length>0&&(0,n.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Parsed Data"}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Offset"}),(0,n.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value (Dec)"}),(0,n.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value (Hex)"})]})}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.parsed_data.data_points.map((e,t)=>(0,n.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[(0,n.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 font-mono",children:e.offset}),(0,n.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 font-mono",children:e.value}),(0,n.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 font-mono",children:["0x",e.hex]})]},t))})]})})]}),c.parsed_data&&(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Data Analysis"}),(0,n.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,n.jsxs)("p",{className:"mb-2",children:[(0,n.jsx)("strong",{children:"Total Length:"})," ",c.parsed_data.length," bytes"]}),(0,n.jsxs)("p",{className:"mb-2",children:[(0,n.jsx)("strong",{children:"Data Points:"})," ",(null===(s=c.parsed_data.data_points)||void 0===s?void 0:s.length)||0," shown"]}),(0,n.jsx)("p",{className:"text-xs text-blue-600 mt-3",children:(0,n.jsx)("em",{children:"Note: This is raw workout data from the WalkingPad. The exact format may vary depending on the device model and firmware version."})})]})]})]})]}):(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"text-gray-400 mb-2",children:(0,n.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,n.jsx)("p",{className:"text-gray-500",children:"Connect to WalkingPad to view workout history"})]})]})}function x(e){let{message:t,type:s,isVisible:r,onClose:i,duration:c=4e3}=e,[l,o]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(r){o(!0);let e=setTimeout(()=>{o(!1),setTimeout(i,300)},c);return()=>clearTimeout(e)}},[r,c,i]),r||l)?(0,n.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,n.jsx)("div",{className:"\n          ".concat((()=>{switch(s){case"success":return"bg-green-500 text-white border-green-600";case"error":return"bg-red-500 text-white border-red-600";case"info":return"bg-blue-500 text-white border-blue-600";default:return"bg-gray-500 text-white border-gray-600"}})(),"\n          px-4 py-3 rounded-lg shadow-lg border-l-4 min-w-80 max-w-96\n          transform transition-all duration-300 ease-in-out\n          ").concat(l&&r?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95","\n        "),children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-shrink-0 mr-3",children:(()=>{switch(s){case"success":return(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"info":return(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}})()}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("p",{className:"text-sm font-medium",children:t})}),(0,n.jsx)("button",{onClick:()=>{o(!1),setTimeout(i,300)},className:"ml-3 flex-shrink-0 text-white hover:text-gray-200 transition-colors",children:(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}):null}let h=()=>{let[e,t]=(0,a.useState)({message:"",type:"info",isVisible:!1});return{toast:e,showToast:(0,a.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";t({message:e,type:s,isVisible:!0})},[]),hideToast:(0,a.useCallback)(()=>{t(e=>({...e,isVisible:!1}))},[])}};function u(){let[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)([]),[u,g]=(0,a.useState)({connected:!1,device_name:null,device_address:null,connected_at:null}),[j,v]=(0,a.useState)({speed:0,time:0,distance:0,steps:0,mode:0,belt_state:0}),[p,f]=(0,a.useState)([]),[b,y]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)(null),[C,_]=(0,a.useState)(!1),{toast:L,showToast:M,hideToast:D}=h();(0,a.useEffect)(()=>{let e=(0,r.io)();return t(e),e.on("connection_update",t=>{g(t),w(!1),W("Connection status: ".concat(t.connected?"Connected":"Disconnected"),"info"),t.connected?(M("Successfully connected to ".concat(t.device_name||"WalkingPad","!"),"success"),setTimeout(()=>{e&&(e.emit("power_on"),W("Automatically enabling manual mode...","info"))},1e3)):M("Disconnected from WalkingPad","info")}),e.on("status_update",e=>{v(e)}),e.on("scan_results",e=>{if(i(e),y(!1),W("Found ".concat(e.length," devices"),"info"),e.length>0){let t=1===e.length?"device":"devices";M("Found ".concat(e.length," WalkingPad ").concat(t,"!"),"success")}else M("No devices detected, please try again","error")}),e.on("log",e=>{W(e.message,e.level)}),e.on("workout_history",e=>{var t;S(e),_(!1),W("Workout history retrieved: ".concat((null===(t=e.parsed_data)||void 0===t?void 0:t.length)||0," bytes"),"info"),e.message?M(e.message,"info"):M("Workout history loaded successfully","success")}),e.on("error",e=>{W(e.message,"error"),y(!1),w(!1),_(!1);let t=e.message.toLowerCase();t.includes("connection failed")||t.includes("connect failed")||t.includes("connection timed out")||t.includes("failed to connect")?M("Failed to connect, please try again","error"):t.includes("workout history retrieval failed")||t.includes("workout history failed")?M("Failed to load workout history","error"):t.includes("scan failed")?M("Device scan failed, please try again","error"):(t.includes("critical")||t.includes("fatal"))&&M("An error occurred, please check the activity log","error")}),()=>{e.close()}},[]),(0,a.useEffect)(()=>{let e=e=>{if(!(!u.connected||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.key){case" ":e.preventDefault(),1===j.belt_state?B():P();break;case"ArrowUp":e.preventDefault(),1===j.mode&&z(Math.min(6,j.speed+.1));break;case"ArrowDown":e.preventDefault(),1===j.mode&&z(Math.max(0,j.speed-.1));break;case"1":case"2":case"3":case"4":case"5":case"6":e.preventDefault(),1===j.mode&&z(parseFloat(e.key))}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[u.connected,j.belt_state,j.mode,j.speed]);let W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s={message:e,level:t,timestamp:new Date().toISOString()};f(e=>[s,...e].slice(0,100))},P=()=>{e&&u.connected&&(e.emit("start_treadmill"),W("Starting treadmill...","info"))},B=()=>{e&&u.connected&&(e.emit("stop_treadmill"),W("Stopping treadmill...","info"))},z=t=>{e&&u.connected&&(e.emit("set_speed",{speed:t}),W("Setting speed to ".concat(t," km/h..."),"info"))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c(),{children:[(0,n.jsx)("title",{children:"WalkingPad Controller"}),(0,n.jsx)("meta",{name:"description",content:"Control your WalkingPad treadmill"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"WalkingPad Controller"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Control your WalkingPad treadmill with real-time monitoring"})]}),(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsx)(l,{devices:s,connectionStatus:u,isScanning:b,isConnecting:N,onScanDevices:()=>{e&&(y(!0),i([]),e.emit("scan_devices"),W("Scanning for devices...","info"),M("Scanning for WalkingPad devices...","info"))},onConnectDevice:t=>{e&&(w(!0),e.emit("connect_device",{address:t}),W("Connecting to device ".concat(t,"..."),"info"),M("Attempting to connect to WalkingPad...","info"))},onDisconnectDevice:()=>{e&&(e.emit("disconnect_device"),W("Disconnecting from device...","info"))}})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,n.jsx)("div",{children:(0,n.jsx)(o,{connected:u.connected,treadmillStatus:j,onStart:P,onStop:B,onSetSpeed:z,onPowerOn:()=>{e&&u.connected&&(e.emit("power_on"),W("Powering on treadmill...","info"))},onPowerOff:()=>{e&&u.connected&&(e.emit("power_off"),W("Powering off treadmill...","info"))}})}),(0,n.jsx)("div",{children:(0,n.jsx)(d,{connected:u.connected,status:j,onRefreshStatus:()=>{e&&u.connected&&(e.emit("get_status"),W("Requesting status update...","info"))}})})]}),u.connected&&(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsx)(m,{connected:u.connected,onGetWorkoutHistory:t=>{e&&u.connected&&(_(!0),S(null),e.emit("get_workout_history",{mode:t}),W("Requesting workout history (mode ".concat(t,")..."),"info"),M("Loading workout history...","info"))},workoutData:k,isLoading:C})})]})}),(0,n.jsx)(x,{message:L.message,type:L.type,isVisible:L.isVisible,onClose:D})]})}}},function(e){e.O(0,[731,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);